{{- $url   := .Get "url"    -}}
{{- $title := .Get "title" | default "" -}}
{{- $desc  := .Get "desc"  | default "" -}}
{{- $img   := .Get "image" | default "" -}}
{{- $host  := (urls.Parse $url).Host | default $url -}}

<a class="link-card" href="{{ $url }}" target="{{ .Get "target" | default "_blank" }}" rel="noopener noreferrer">
  <div class="link-card__thumb">
    {{- if $img -}}
      <img src="{{ $img }}" alt="{{ $title }}" loading="lazy">
    {{- else -}}
      <div class="link-card__thumb--placeholder" aria-hidden="true"></div>
    {{- end -}}
  </div>

  <div class="link-card__body">
    <div class="link-card__title">{{- if $title -}}{{ $title }}{{- else -}}{{ $host }}{{- end -}}</div>
    {{- if $desc -}}<div class="link-card__desc">{{ $desc }}</div>{{- end -}}
    <div class="link-card__meta">
      <img class="link-card__favicon"
           src="https://www.google.com/s2/favicons?sz=64&domain={{ $host }}"
           alt="favicon" loading="lazy">
      <span class="link-card__host">{{ $host }}</span>
    </div>
  </div>
</a>

<style>
.link-card{
  display:flex; gap:12px; align-items:stretch;
  border:1px solid var(--card-border,#e5e7eb);
  border-radius:12px; text-decoration:none;
  background:var(--card-bg,#fff);
  overflow:hidden; transition:transform .06s ease, box-shadow .2s ease, border-color .2s;
}
.link-card:hover{ transform:translateY(-1px); box-shadow:0 6px 20px rgba(0,0,0,.06); border-color:#d1d5db; }
.link-card__thumb{ width:38%; min-width:200px; max-width:320px; background:#f3f4f6; display:flex; align-items:center; justify-content:center; }
.link-card__thumb img{ width:100%; height:100%; object-fit:cover; display:block; }
.link-card__thumb--placeholder{ width:100%; height:100%; background:linear-gradient(135deg,#f3f4f6,#e5e7eb); }
.link-card__body{ padding:14px 16px; display:flex; flex-direction:column; justify-content:space-between; flex:1; min-width:0; }
.link-card__title{ font-weight:700; font-size:1rem; line-height:1.4; color:var(--card-title,#111827); margin-bottom:6px; overflow:hidden; display:-webkit-box; -webkit-line-clamp:2; -webkit-box-orient:vertical; }
.link-card__desc{ color:#4b5563; font-size:.92rem; line-height:1.5; margin-bottom:10px; overflow:hidden; display:-webkit-box; -webkit-line-clamp:2; -webkit-box-orient:vertical; }
.link-card__meta{ display:flex; align-items:center; gap:8px; color:#6b7280; font-size:.85rem; }
.link-card__favicon{ width:16px; height:16px; border-radius:4px; }
@media (max-width:720px){
  .link-card{ flex-direction:column; }
  .link-card__thumb{ width:100%; min-width:auto; max-height:180px; }
}
</style>
